using Unity.Entities;

namespace DotsPrototypeAsteroids.PabloSforsini
{
    public class VulnerabilitySystem : SystemBase
    {
        private float deltaTime;
        protected override void OnUpdate()
        {
            deltaTime = UnityEngine.Time.deltaTime;

            Entities.WithAll<InputComponent>().ForEach((Entity entity, ref HitComponent hitComponent, ref ShieldPowerUpDataComponent shield) =>
            {
                if (hitComponent.canBeHit == false && !shield.active)
                {

                    hitComponent.timer += deltaTime;

                    if (hitComponent.timer <= hitComponent.respawnTime) return;

                    hitComponent.canBeHit = true;
                    hitComponent.timer = 0;
                }


            }).WithoutBurst().Run();
        }
    }

}

